<!DOCTYPE html>
<!-- saved from url=(0072)file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="pandoc">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Using Blbmethods</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css">




<script type="text/javascript" src="./UsingBlbmethods_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.2') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>




<h1 class="title toc-ignore">Using Blbmethods</h1>



<p>Suppose we have a massive, high-dimensional dataset. Working on the whole dataset all at once is not practical, and map reduce does not give us accurate enough results. Hence we turn to bag of little bootstraps (BLB).</p>
<p>This package provides blb implementation for:</p>
<ul>
<li><p>Linear Models</p></li>
<li><p>Random Forests</p></li>
<li><p>Logistic Regression</p></li>
</ul>
<p>This vignette provides information on how the blb algorithm is implemented for each of the models, documentation on how to use the provided functions, and provides performance metrics on the package’s multicore functions and C++ code.</p>
<div id="blblm" class="section level2">
<h2>Blblm</h2>
<p>The first blb implementation of a statistical model provided by this package is linear models. The idea here is to divide a regression dataset into m parts and from each part, create B bootstrap models. We find estimates by reducing our models and confidence intervals by using bootstrap percentile confidence intervals then reducing.</p>
<div id="creating-a-blblm-model" class="section level3">
<h3>Creating a Blblm Model</h3>
<p>To create a blblm object, you need a dataframe containing the variables you need to fit a linear model. For our example, we will use the R dataset trees. We would like to fit Height + Volume on Girth.</p>
<pre><code>#&gt;   Girth Height Volume
#&gt; 1   8.3     70   10.3
#&gt; 2   8.6     65   10.3
#&gt; 3   8.8     63   10.2
#&gt; 4  10.5     72   16.4
#&gt; 5  10.7     81   18.8
#&gt; 6  10.8     83   19.7</code></pre>
<p>There are a two additional arguments we have to consider here. We must decide the how many subsets to split our data into and how many bootstrap samples we want from each subset. Since trees is a small dataset, we can choose to split it into two and use 100 bootstrap samples.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb2-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">blblm</span>(Girth <span class="sc">~</span> Height <span class="sc">+</span> Volume, <span class="at">data =</span> trees, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">100</span>)</span></code></pre></div>
<p>Here, model_blblm is a blblm object. A blblm object contains two things: a list of the bootstrapped models for all of the subsets and the formula of the model. Using this object, you can perform obtain many of the blb estimates associated with linear models using the provided class functions as described below.</p>
</div>
<div id="blblm-object-functions" class="section level3">
<h3>Blblm Object Functions</h3>
<p>There are many functions that can be called on a blblm object.</p>
<div id="print" class="section level4">
<h4>print</h4>
<p>Calling print on a blblm object will display the formula associated with the blblm object.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(model)</span>
<span id="cb3-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; blblm model: Girth ~ Height + Volume</span></span></code></pre></div>
</div>
<div id="sigma" class="section level4">
<h4>sigma</h4>
<p>Calling sigma on a blblm object will obtain the blb estimate of sigma.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sigma</span>(model)</span>
<span id="cb4-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.6977093</span></span></code></pre></div>
<p>Setting the confidence argument to true will return a 95% confidence interval for sigma. You can additionally specify the level of the confidence interval. Confidence intervals found with mean of bootstrap percentile confidence intervals.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sigma</span>(model, <span class="at">confidence =</span> <span class="cn">TRUE</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb5-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     sigma       lwr       upr </span></span>
<span id="cb5-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.6977093 0.5108962 0.8495311</span></span></code></pre></div>
</div>
<div id="coef" class="section level4">
<h4>coef</h4>
<p>Calling coef on a blblm object will obtained the blb estimate of the regression coefficients,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(model)</span>
<span id="cb6-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)      Height      Volume </span></span>
<span id="cb6-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11.57600071 -0.05812823  0.20019335</span></span></code></pre></div>
</div>
<div id="confint" class="section level4">
<h4>confint</h4>
<p>Calling confint will return a 95% confidence interval for our predictor variables. You can additionally specify the level of the confidence interval. Confidence intervals found with mean of bootstrap percentile confidence intervals.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(model, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb7-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              2.5%       97.5%</span></span>
<span id="cb7-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Height -0.1203708 0.007264782</span></span>
<span id="cb7-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Volume  0.1825456 0.223272452</span></span></code></pre></div>
<p>You can specify a specific variable using the parm argument.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(model, <span class="at">parm =</span> <span class="st">'Volume'</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb8-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             2.5%     97.5%</span></span>
<span id="cb8-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Volume 0.1825456 0.2232725</span></span></code></pre></div>
</div>
<div id="predict" class="section level4">
<h4>predict</h4>
<p>Calling predict on a blblm object will give us the prediction for the new dataset.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb9-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> trees[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb9-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, <span class="at">new_data =</span> new_dat)</span>
<span id="cb9-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         2         3         4 </span></span>
<span id="cb9-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9.859657  9.955894 10.673939</span></span></code></pre></div>
<p>You can also call for a confidence interval. Confidence intervals found with mean of bootstrap percentile confidence intervals.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, <span class="at">new_data =</span> new_dat, <span class="at">confidence =</span> <span class="cn">TRUE</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb10-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         fit       lwr      upr</span></span>
<span id="cb10-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  9.859657  9.069786 10.77584</span></span>
<span id="cb10-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  9.955894  9.047275 10.99069</span></span>
<span id="cb10-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 10.673939 10.310941 11.16221</span></span></code></pre></div>
<p>Additionally, you can also use multicore processing for prediction. Specify the number of workers using the nthreads argument.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, <span class="at">new_data =</span> new_dat, <span class="at">nthreads =</span> <span class="dv">1</span>)</span>
<span id="cb11-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         2         3         4 </span></span>
<span id="cb11-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9.859657  9.955894 10.673939</span></span></code></pre></div>
</div>
</div>
<div id="performance-metrics-for-blblm" class="section level3">
<h3>Performance Metrics For Blblm</h3>
<p>Since this package deals with big data, this package contains many features to help speed up computing.</p>
<div id="multicore-processing-using-furrr" class="section level4">
<h4>Multicore Processing using Furrr</h4>
<p>Our package allows the use of multicore processing through the package furrr. Simply give the number of workers you want through the argument nthreads.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">blblm</span>(c <span class="sc">~</span> b <span class="sc">+</span> a <span class="sc">+</span> a<span class="sc">*</span>b, <span class="at">data =</span> dat, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>)</span></code></pre></div>
<p>To see the improvements parallel computing brings, let us generate a fairly large dataset. Here, we generate a dataset with three variables, each with 3e4 observations. We can benchmark the performance of spliting ten times with 5,000 bootstrao samples each using a single core and 8 cores.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb13-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blblm</span>(c <span class="sc">~</span> b <span class="sc">+</span> a <span class="sc">+</span> a <span class="sc">*</span> b, <span class="at">data =</span> dat, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb13-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blblm</span>(c <span class="sc">~</span> b <span class="sc">+</span> a <span class="sc">+</span> a <span class="sc">*</span> b, <span class="at">data =</span> dat, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb13-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb13-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb13-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb13-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                                             min</span></span>
<span id="cb13-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                                           &lt;bch&gt;</span></span>
<span id="cb13-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 blblm(c ~ b + a + a * b, data = dat, m = 10, B = 5000, nthreads = 1) 28.7s</span></span>
<span id="cb13-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blblm(c ~ b + a + a * b, data = dat, m = 10, B = 5000, nthreads = 8) 26.1s</span></span>
<span id="cb13-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 4 more variables: median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;,</span></span>
<span id="cb13-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>As we can see, for high amounts of data, the multicore process improves computational speed.</p>
<p>We can repeat this experiment for now length 4e4</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb14-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blblm</span>(c <span class="sc">~</span> b <span class="sc">+</span> a <span class="sc">+</span> a <span class="sc">*</span> b, <span class="at">data =</span> dat, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb14-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blblm</span>(c <span class="sc">~</span> b <span class="sc">+</span> a <span class="sc">+</span> a <span class="sc">*</span> b, <span class="at">data =</span> dat, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb14-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb14-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb14-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb14-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                                             min</span></span>
<span id="cb14-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                                           &lt;bch&gt;</span></span>
<span id="cb14-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 blblm(c ~ b + a + a * b, data = dat, m = 10, B = 5000, nthreads = 1) 40.6s</span></span>
<span id="cb14-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blblm(c ~ b + a + a * b, data = dat, m = 10, B = 5000, nthreads = 8) 19.5s</span></span>
<span id="cb14-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 4 more variables: median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;,</span></span>
<span id="cb14-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>Multicore processing again speeds up computational time by a lot.</p>
<p>We can also use multicore processing for prediction as well.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">200</span>)</span>
<span id="cb15-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">200</span>)</span>
<span id="cb15-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-3" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(a, b)</span>
<span id="cb15-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-4" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb15-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, <span class="at">new_data =</span> new_dat, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb15-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, <span class="at">new_data =</span> new_dat, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb15-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb15-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb15-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb15-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                         min median `itr/sec`</span></span>
<span id="cb15-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                       &lt;bch&gt; &lt;bch:&gt;     &lt;dbl&gt;</span></span>
<span id="cb15-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 predict(model, new_data = new_dat, nthreads = 1) 1.15m  1.15m    0.0145</span></span>
<span id="cb15-16"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 predict(model, new_data = new_dat, nthreads = 8) 1.09m  1.09m    0.0152</span></span>
<span id="cb15-17"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 2 more variables: mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>It does takes some time to create the cores, so using multiple cores is only time efficient for a large group of predictions.</p>
</div>
<div id="weighted-least-squares-using-rcpp-armadillo" class="section level4">
<h4>Weighted Least Squares using Rcpp Armadillo</h4>
<p>Additionally, to increase computational efficiency, lm.wfit is rewritten in Rcpp Armadillo as lmW and lm2 is written as an alternative to lm1 that calls lmW instead. The lmW code is based off RcppArmadillo’s fastLm.R and fastLm.cpp.</p>
<p>The idea mathematically is to simply change the least squares normal equations from <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 7.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.134em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.015em, 1006.13em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="msubsup" id="MathJax-Span-3"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-5" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-7"><span class="mrow" id="MathJax-Span-8"><span class="munderover" id="MathJax-Span-9"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-11" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-13" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.491em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-15" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.646em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>X</mi><mi>t</mi></msup><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mo>=</mo><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">X^tX\hat{\beta}=X^Ty</script></span> to <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-17" style="width: 9.884em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.217em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.015em, 1008.22em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-18"><span class="msubsup" id="MathJax-Span-19"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-21" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-24"><span class="mrow" id="MathJax-Span-25"><span class="munderover" id="MathJax-Span-26"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-29" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-30" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.491em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-32" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-34" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.646em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>X</mi><mi>t</mi></msup><mi>W</mi><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mo>=</mo><msup><mi>X</mi><mi>T</mi></msup><mi>W</mi><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">X^tWX\hat{\beta}=X^TWy</script></span>, where <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-35" style="width: 1.313em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.07em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-36"><span class="mi" id="MathJax-Span-37" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">W</script></span> is a diagonal matrix of our weights vector.</p>
<p>To implement this in Rcpp Armadillo, since it is costly to convert our weights vector into matrix <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-38" style="width: 1.313em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.07em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-39"><span class="mi" id="MathJax-Span-40" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">W</script></span>, we make use of the /% operator (element-wise cube multiplication) and .each_col() function (repeat operation on each column). Since <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-41" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.48em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-42"><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">y</script></span> is a vector the fastest way to build <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-44" style="width: 1.908em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.551em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.55em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-6">Wy</script></span> using <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0025;&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-48" style="width: 2.443em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.03em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-49"><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math-italic;">w</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Main;">%</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi mathvariant="normal">%</mi><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">w\%y</script></span>, where <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-53" style="width: 0.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.717em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.72em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-54"><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math-italic;">w</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">w</script></span> is the weights vector. <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-56" style="width: 3.812em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.193em, 1003.16em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-57"><span class="msubsup" id="MathJax-Span-58"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-60" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>X</mi><mi>t</mi></msup><mi>W</mi><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">X^tWX</script></span> has no vector, so we have to use the each_col function paired with the % operator to make <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msup&gt;&lt;mi&gt;W&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-63" style="width: 2.801em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.324em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.193em, 1002.32em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-64"><span class="msubsup" id="MathJax-Span-65"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.896em;"><span class="mi" id="MathJax-Span-67" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-68" style="font-family: MathJax_Math-italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>X</mi><mi>t</mi></msup><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">X^tW</script></span>.</p>
</div>
<div id="speed-of-lmw-vs-lm.fit" class="section level4">
<h4>Speed of lmW vs lm.fit</h4>
<p>We can benchmark the performance of lmW. Here, we generate another dataset of three variables each with length 1e4, and a vector of weights length 1e4.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb16-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm.wfit</span>(X, y, w),</span>
<span id="cb16-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lmW</span>(X, y, w),</span>
<span id="cb16-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb16-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb16-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb16-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb16-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                     min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb16-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb16-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 lm.wfit(X, y, w)            1.79ms   2.65ms      381.        NA    22.9 </span></span>
<span id="cb16-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blbmethods:::lmW(X, y, w)    516us  593.9us     1574.        NA     6.18</span></span></code></pre></div>
<p>As we can see, lmW is significantly faster than lm.wfit. Since for blb we call this function many times, using lmW will save us a lot of time.</p>
<p>We can benchmark the whole model creating function to show the difference in efficiency between the two functions. Here lm2 denotes the version using lmW.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb17-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lm1</span>(X,y,<span class="fl">1e4</span>),</span>
<span id="cb17-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lm2</span>(X,y,<span class="fl">1e4</span>),</span>
<span id="cb17-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb17-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb17-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb17-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb17-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                         min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb17-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb17-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 blbmethods:::lm1(X, y, 10000)   3.89ms   4.46ms      211.        NA    13.4 </span></span>
<span id="cb17-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blbmethods:::lm2(X, y, 10000)   2.35ms   2.64ms      362.        NA     6.28</span></span></code></pre></div>
<p>It is apparent that lm2 is much faster.</p>
<p>We can try both again for length 1e5.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb18-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm.wfit</span>(X, y, w),</span>
<span id="cb18-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lmW</span>(X, y, w),</span>
<span id="cb18-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb18-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb18-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb18-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                     min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb18-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb18-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 lm.wfit(X, y, w)            19.7ms  24.04ms      44.0        NA   249.  </span></span>
<span id="cb18-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blbmethods:::lmW(X, y, w)    6.5ms   7.55ms     130.         NA     4.19</span></span></code></pre></div>
<p>Again, we also benchmark lm1 and lm2.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb19-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lm1</span>(X,y,<span class="fl">1e5</span>),</span>
<span id="cb19-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  blbmethods<span class="sc">:::</span><span class="fu">lm2</span>(X,y,<span class="fl">1e5</span>),</span>
<span id="cb19-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb19-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb19-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb19-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb19-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                         min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb19-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb19-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 blbmethods:::lm1(X, y, 1e+05)   36.5ms   39.3ms      25.7        NA    30.0 </span></span>
<span id="cb19-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blbmethods:::lm2(X, y, 1e+05)   22.6ms   24.2ms      40.9        NA     4.54</span></span></code></pre></div>
<p>As we can see, our Rcpp Armadillo function lmW becomes even faster relatively.</p>
</div>
</div>
</div>
<div id="blbrf" class="section level2">
<h2>Blbrf</h2>
<p>This package also contains a blb implementation of the Random Forest algorithm for classification. Since Random Forests are already a bootstrap algorithm, we divide a classification dataset into m portions and create a Random Forest model for each portion with B trees. Note however that since the Random Forest Algorithm does random sampling of predictor variables, it is not reliable to use bootstrap percentile confidence intervals. Instead, we use jackknife-after-bootstrap to do so.</p>
<div id="creating-a-blbrf-object" class="section level3">
<h3>Creating a Blbrf Object</h3>
<p>All that is needed to create a blbrf object is a classification dataset. The argument m specifies the number of subsets to divide the dataset into and the argument B specifies the number of bootstrap trees to use per subset.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb20-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">blbrf</span>(type <span class="sc">~</span> ., <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">500</span>, <span class="at">nthreads =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="blbrf-object-functions" class="section level3">
<h3>Blbrf Object Functions</h3>
<div id="print.blblrf" class="section level4">
<h4>print.blblrf</h4>
<p>Printing blbrf model prints the model relationship and classification levels.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(model)</span>
<span id="cb21-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; blbrf model: type ~ ., levels: [1] "nonspam" "spam"</span></span></code></pre></div>
</div>
<div id="predict.blbrf" class="section level4">
<h4>predict.blbrf</h4>
<p>You can use a blbrf model to predict new data samples. Here, the prediction is based off of the average of the probabilities of each subset.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb22-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">56</span><span class="sc">:</span><span class="dv">58</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb22-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>)</span>
<span id="cb22-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] spam    spam    nonspam</span></span>
<span id="cb22-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: nonspam spam</span></span></code></pre></div>
<p>You can specify to return the probability of each class.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"probability"</span>)</span>
<span id="cb23-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         nonspam      spam</span></span>
<span id="cb23-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] 0.20852772 0.7914723</span></span>
<span id="cb23-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,] 0.09185234 0.9081477</span></span>
<span id="cb23-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,] 0.67502490 0.3249751</span></span></code></pre></div>
<p>You can also specify to return a confidence interval. Random Forest confidence intervals use jackknife-after-bootstrap, not bootstrap percentile confidence intervals, so a sample size of 20 or greater is needed to calibrate the standard error.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">56</span><span class="sc">:</span><span class="dv">76</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb24-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"CI"</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb24-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $nonspam</span></span>
<span id="cb24-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             0.025      0.975</span></span>
<span id="cb24-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1,]  0.16786478 0.24919065</span></span>
<span id="cb24-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2,]  0.05132728 0.13237740</span></span>
<span id="cb24-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3,]  0.60904090 0.74100890</span></span>
<span id="cb24-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4,]  0.05280509 0.14395315</span></span>
<span id="cb24-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5,]  0.03249444 0.11153738</span></span>
<span id="cb24-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6,]  0.31385240 0.42372710</span></span>
<span id="cb24-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7,]  0.36940327 0.45645485</span></span>
<span id="cb24-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8,]  0.24425843 0.36134742</span></span>
<span id="cb24-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9,]  0.33248490 0.46801905</span></span>
<span id="cb24-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10,]  0.32628739 0.42991857</span></span>
<span id="cb24-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11,]  0.08062628 0.17719084</span></span>
<span id="cb24-16"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12,]  0.04794302 0.12881984</span></span>
<span id="cb24-17"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13,]  0.39764244 0.50838450</span></span>
<span id="cb24-18"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14,]  0.01299917 0.09138861</span></span>
<span id="cb24-19"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15,]  0.38042666 0.48336589</span></span>
<span id="cb24-20"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16,]  0.03663493 0.12503782</span></span>
<span id="cb24-21"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17,]  0.03176446 0.11572047</span></span>
<span id="cb24-22"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18,]  0.02936703 0.11054242</span></span>
<span id="cb24-23"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19,]  0.02960710 0.12269540</span></span>
<span id="cb24-24"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20,] -0.02625330 0.05303148</span></span>
<span id="cb24-25"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21,]  0.06771039 0.15342943</span></span>
<span id="cb24-26"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb24-27"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $spam</span></span>
<span id="cb24-28"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           0.025     0.975</span></span>
<span id="cb24-29"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1,] 0.7495218 0.8334228</span></span>
<span id="cb24-30"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2,] 0.8664984 0.9497969</span></span>
<span id="cb24-31"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3,] 0.2594596 0.3904906</span></span>
<span id="cb24-32"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4,] 0.8552109 0.9480309</span></span>
<span id="cb24-33"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5,] 0.8871024 0.9688657</span></span>
<span id="cb24-34"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6,] 0.5754643 0.6869562</span></span>
<span id="cb24-35"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7,] 0.5426499 0.6314920</span></span>
<span id="cb24-36"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8,] 0.6389629 0.7554313</span></span>
<span id="cb24-37"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9,] 0.5339796 0.6655164</span></span>
<span id="cb24-38"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10,] 0.5703473 0.6734468</span></span>
<span id="cb24-39"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11,] 0.8229368 0.9192461</span></span>
<span id="cb24-40"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12,] 0.8693655 0.9538717</span></span>
<span id="cb24-41"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13,] 0.4914619 0.6025111</span></span>
<span id="cb24-42"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14,] 0.9072165 0.9883957</span></span>
<span id="cb24-43"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15,] 0.5171486 0.6190588</span></span>
<span id="cb24-44"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16,] 0.8746510 0.9636763</span></span>
<span id="cb24-45"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17,] 0.8831844 0.9693307</span></span>
<span id="cb24-46"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18,] 0.8880865 0.9720041</span></span>
<span id="cb24-47"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19,] 0.8779356 0.9697619</span></span>
<span id="cb24-48"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20,] 0.9456130 1.0276089</span></span>
<span id="cb24-49"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21,] 0.8454740 0.9333862</span></span></code></pre></div>
<p>Finally, there is multicore processing available for predictions. You can specify the number of cores using the nthreads argument.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb25-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">56</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb25-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>, <span class="at">nthreads =</span> <span class="dv">1</span>)</span>
<span id="cb25-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] spam</span></span>
<span id="cb25-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: nonspam spam</span></span></code></pre></div>
</div>
</div>
<div id="performance-metrics-for-blbrf" class="section level3">
<h3>Performance Metrics for Blbrf</h3>
<p>Since we are using the package Ranger, which is mostly written in C, there is no need for us to write any parts in C. However, we can give the option for multicore processing.</p>
<div id="multicore-processing-for-blbrf" class="section level4">
<h4>Multicore Processing for Blbrf</h4>
<p>Package Ranger has a built-in multicore processing function, that we can use to build our model.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb26-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbrf</span>(type <span class="sc">~</span> ., <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb26-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbrf</span>(type <span class="sc">~</span> ., <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb26-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb26-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb26-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb26-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb26-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb26-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                                      min median</span></span>
<span id="cb26-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                                   &lt;bch:&gt; &lt;bch:&gt;</span></span>
<span id="cb26-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 blbrf(type ~ ., data = spam, m = 10, B = 5000, nthreads = 1)  17.3s  17.3s</span></span>
<span id="cb26-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 blbrf(type ~ ., data = spam, m = 10, B = 5000, nthreads = 8)  7.99s  7.99s</span></span>
<span id="cb26-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 3 more variables: `itr/sec` &lt;dbl&gt;, mem_alloc &lt;bch:byt&gt;,</span></span>
<span id="cb26-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>We can also use multicore processing for predictions. First, lets create a model with 5000 trees for each split.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb27-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">blbrf</span>(type <span class="sc">~</span> ., <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>)</span>
<span id="cb27-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb27-2" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">56</span>,<span class="sc">-</span><span class="dv">58</span>]</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb28-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>, <span class="at">level =</span> <span class="fl">0.95</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb28-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>, <span class="at">level =</span> <span class="fl">0.95</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb28-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb28-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb28-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb28-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                                                 min</span></span>
<span id="cb28-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                                               &lt;bch&gt;</span></span>
<span id="cb28-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 predict(model, new_dat, type = "prediction", level = 0.95, nthreads = 1) 782ms</span></span>
<span id="cb28-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 predict(model, new_dat, type = "prediction", level = 0.95, nthreads = 8) 651ms</span></span>
<span id="cb28-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 4 more variables: median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;,</span></span>
<span id="cb28-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>With just one prediction, we are slightly faster. We can try again for many predictions.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">101</span><span class="sc">:</span><span class="dv">800</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb29-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-3" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb29-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>, <span class="at">level =</span> <span class="fl">0.95</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb29-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"prediction"</span>, <span class="at">level =</span> <span class="fl">0.95</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb29-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb29-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb29-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb29-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                                                                 min</span></span>
<span id="cb29-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                                                               &lt;bch&gt;</span></span>
<span id="cb29-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 predict(model, new_dat, type = "prediction", level = 0.95, nthreads = 1) 15.7s</span></span>
<span id="cb29-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 predict(model, new_dat, type = "prediction", level = 0.95, nthreads = 8)  4.9s</span></span>
<span id="cb29-16"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 4 more variables: median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;,</span></span>
<span id="cb29-17"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>As we can see for 700 predictions, multicore processing with 8 cores is much faster.</p>
</div>
</div>
</div>
<div id="blbglm" class="section level2">
<h2>Blbglm</h2>
<p>The final method provided by this function is binary logistic regression. The idea here is we take a binary classification dataset and divide it into m parts and create B bootstrapped logistic regression models. We find estimates by reducing our models and confidence intervals by using bootstrap percentile confidence intervals then reducing.</p>
<div id="creating-a-blbglm-object" class="section level3">
<h3>Creating a Blbglm Object</h3>
<p>We will use the same spam dataset from Blbrf. However, we will only fit 3 variables to avoid the curse of dimensionality problem from using linear classifiers such as logistic regression. Again, m denotes the number of splits, B the number of bootstrap samples per split, and nthreads the number of workers used in parallelization.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb30-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">500</span>, <span class="at">nthreads =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="blbglm-object-functions" class="section level3">
<h3>Blbglm Object Functions</h3>
<p>There are many functions that can be called on a blblm object.</p>
<div id="print-1" class="section level4">
<h4>print</h4>
<p>Print prints the formula and levels of the blbglm object.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(model)</span>
<span id="cb31-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; blbglm model: type ~ make + address + all, levels: [1] "nonspam" "spam"</span></span></code></pre></div>
</div>
<div id="coef-1" class="section level4">
<h4>Coef</h4>
<p>You can obtain the coefficients of the model. Note in the case of logistic regression, the coefficients are represented as <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mfrac&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-69" style="width: 17.265em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.348em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.015em, 1014.35em, 2.92em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-70"><span class="mi" id="MathJax-Span-71" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-73" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-74"><span class="mrow" id="MathJax-Span-75"><span class="mfrac" id="MathJax-Span-76"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.515em, 1000.36em, 4.289em, -999.997em); top: -4.521em; left: 50%; margin-left: -0.176em;"><span class="mi" id="MathJax-Span-77" style="font-size: 70.7%; font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em, 1001.25em, 4.289em, -999.997em); top: -3.568em; left: 50%; margin-left: -0.652em;"><span class="mrow" id="MathJax-Span-78"><span class="mn" id="MathJax-Span-79" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-80" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-81" style="font-size: 70.7%; font-family: MathJax_Math-italic;">p</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1001.37em, 1.253em, -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.372em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-82" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="texatom" id="MathJax-Span-83" style="padding-left: 0.301em;"><span class="mrow" id="MathJax-Span-84"><span class="munderover" id="MathJax-Span-85"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1001.01em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="msubsup" id="MathJax-Span-86"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-88" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.241em;"><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-90" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="texatom" id="MathJax-Span-91" style="padding-left: 0.241em;"><span class="mrow" id="MathJax-Span-92"><span class="munderover" id="MathJax-Span-93"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1001.01em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="msubsup" id="MathJax-Span-94"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-95" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-96" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.241em;"><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-98"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.836em;"><span class="mn" id="MathJax-Span-100" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main;">+</span><span class="mo" id="MathJax-Span-102" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-103" style="font-family: MathJax_Main; padding-left: 0.182em;">.</span><span class="mo" id="MathJax-Span-104" style="font-family: MathJax_Main; padding-left: 0.182em;">.</span><span class="mo" id="MathJax-Span-105" style="font-family: MathJax_Main; padding-left: 0.182em;">.</span><span class="mo" id="MathJax-Span-106" style="font-family: MathJax_Main; padding-left: 0.182em;">,</span><span class="msubsup" id="MathJax-Span-107" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(2.801em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="texatom" id="MathJax-Span-108"><span class="mrow" id="MathJax-Span-109"><span class="munderover" id="MathJax-Span-110"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.747em; left: 0.658em;"><span class="mi" id="MathJax-Span-113" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-114"><span style="display: inline-block; position: relative; width: 1.313em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.84em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.836em;"><span class="mi" id="MathJax-Span-116" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.711em; border-left: 0px solid; width: 0px; height: 2.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi><mi>o</mi><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mfrac><mi>p</mi><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow></mfrac></mrow><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mover><msub><mi>β</mi><mn>0</mn></msub><mo stretchy="false">^</mo></mover></mrow><mo>+</mo><mrow class="MJX-TeXAtom-ORD"><mover><msub><mi>β</mi><mn>1</mn></msub><mo stretchy="false">^</mo></mover></mrow><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mi>n</mi></msub><msub><mi>X</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-11">log{\frac{p}{1-p}}=\hat{\beta_0}+\hat{\beta_1}X_1+,...,\hat{\beta}_nX_n</script></span>, where <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-117" style="width: 8.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.205em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1007.09em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-118"><span class="mi" id="MathJax-Span-119" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-120" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-121" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-123" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.182em;"></span></span><span class="mo" id="MathJax-Span-124" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mn" id="MathJax-Span-125" style="font-family: MathJax_Main; padding-left: 0.301em;">1</span><span class="texatom" id="MathJax-Span-126"><span class="mrow" id="MathJax-Span-127"><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-129" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-130" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Y</mi><mo>=</mo><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>X</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-12">p=P(Y=1|X)</script></span>. The coefficients can be interpreted as if <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-131" style="width: 3.098em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.562em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.015em, 1002.5em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-132"><span class="texatom" id="MathJax-Span-133"><span class="mrow" id="MathJax-Span-134"><span class="munderover" id="MathJax-Span-135"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-136" style="font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.098em, 1000.42em, 3.634em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-137" style="font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-138" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mn" id="MathJax-Span-139" style="font-family: MathJax_Main; padding-left: 0.301em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.575em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mo>=</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-13">\hat{\beta}=1</script></span>, when <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-140" style="width: 1.015em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.84em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-141"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">X</script></span> increases by 1, the probability that <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-143" style="width: 3.158em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.622em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1002.56em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-144"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.182em;"></span></span><span class="mo" id="MathJax-Span-146" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mn" id="MathJax-Span-147" style="font-family: MathJax_Main; padding-left: 0.301em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi><mo>=</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-15">Y=1</script></span> increases by a factor of 10.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(model)</span>
<span id="cb32-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)        make     address         all </span></span>
<span id="cb32-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.74750147  0.84645800 -0.03884058  0.83101990</span></span></code></pre></div>
</div>
<div id="confint-1" class="section level4">
<h4>Confint</h4>
<p>You can also obtain the confidence interval for the coefficients of the model. Confidence intervals found with mean of bootstrap percentile confidence intervals.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(model, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb33-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                2.5%        97.5%</span></span>
<span id="cb33-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; make     0.56936264  1.174188114</span></span>
<span id="cb33-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; address -0.07051817 -0.001680437</span></span>
<span id="cb33-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; all      0.65209991  1.026938728</span></span></code></pre></div>
<p>A specific predictor variable can also be specified.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(model, <span class="at">parm =</span> <span class="st">"make"</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb34-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           2.5%    97.5%</span></span>
<span id="cb34-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; make 0.5693626 1.174188</span></span></code></pre></div>
</div>
<div id="prediction" class="section level4">
<h4>Prediction</h4>
<p>You can predict using new observations.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb35-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">41</span><span class="sc">:</span><span class="dv">44</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb35-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat)</span>
<span id="cb35-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   41   42   43   44 </span></span>
<span id="cb35-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; spam spam spam spam </span></span>
<span id="cb35-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: nonspam spam</span></span></code></pre></div>
<p>You can specify to return the probabilities. Note here the probabilities returned is given by <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-148" style="width: 10.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.753em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.134em, 1008.75em, 3.277em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-149"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-151" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-152" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 6.61em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.336em, 1000.3em, 4.17em, -999.997em); top: -4.402em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-153" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(2.92em, 1006.49em, 4.229em, -999.997em); top: -3.152em; left: 50%; margin-left: -3.211em;"><span class="mrow" id="MathJax-Span-154"><span class="mn" id="MathJax-Span-155" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-156" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="msubsup" id="MathJax-Span-157"><span style="display: inline-block; position: relative; width: 5.539em; height: 0px;"><span style="position: absolute; clip: rect(3.515em, 1000.3em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-158" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.223em; left: 0.36em;"><span class="texatom" id="MathJax-Span-159"><span class="mrow" id="MathJax-Span-160"><span class="mo" id="MathJax-Span-161" style="font-size: 50%; font-family: MathJax_Main;">−</span><span class="texatom" id="MathJax-Span-162"><span class="mrow" id="MathJax-Span-163"><span class="munderover" id="MathJax-Span-164"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="msubsup" id="MathJax-Span-165"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.455em, 1000.3em, 4.289em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-166" style="font-size: 50%; font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.301em;"><span class="mn" id="MathJax-Span-167" style="font-size: 50%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.455em, 1000.18em, 3.932em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-168" style="font-size: 50%; font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-169" style="font-size: 50%; font-family: MathJax_Main;">+</span><span class="texatom" id="MathJax-Span-170"><span class="mrow" id="MathJax-Span-171"><span class="munderover" id="MathJax-Span-172"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.6em, 4.348em, -999.997em); top: -3.985em; left: 0em;"><span class="msubsup" id="MathJax-Span-173"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.455em, 1000.3em, 4.289em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-174" style="font-size: 50%; font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.301em;"><span class="mn" id="MathJax-Span-175" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.455em, 1000.18em, 3.932em, -999.997em); top: -4.283em; left: 0.182em;"><span class="mo" id="MathJax-Span-176" style="font-size: 50%; font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-177"><span style="display: inline-block; position: relative; width: 0.717em; height: 0px;"><span style="position: absolute; clip: rect(3.455em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-178" style="font-size: 50%; font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.42em;"><span class="mn" id="MathJax-Span-179" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-180" style="font-size: 50%; font-family: MathJax_Main;">+</span><span class="mo" id="MathJax-Span-181" style="font-size: 50%; font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-182" style="font-size: 50%; font-family: MathJax_Main;">.</span><span class="mo" id="MathJax-Span-183" style="font-size: 50%; font-family: MathJax_Main;">.</span><span class="mo" id="MathJax-Span-184" style="font-size: 50%; font-family: MathJax_Main;">.</span><span class="mo" id="MathJax-Span-185" style="font-size: 50%; font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-186"><span style="display: inline-block; position: relative; width: 0.717em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.3em, 4.289em, -999.997em); top: -3.985em; left: 0em;"><span class="texatom" id="MathJax-Span-187"><span class="mrow" id="MathJax-Span-188"><span class="munderover" id="MathJax-Span-189"><span style="display: inline-block; position: relative; width: 0.36em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.3em, 4.289em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-190" style="font-size: 50%; font-family: MathJax_Math-italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.455em, 1000.18em, 3.932em, -999.997em); top: -4.283em; left: 0.122em;"><span class="mo" id="MathJax-Span-191" style="font-size: 50%; font-family: MathJax_Main;">^</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.866em; left: 0.36em;"><span class="mi" id="MathJax-Span-192" style="font-size: 50%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-193"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.455em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-194" style="font-size: 50%; font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.926em; left: 0.42em;"><span class="mi" id="MathJax-Span-195" style="font-size: 50%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1006.61em, 1.253em, -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 6.61em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.139em; border-left: 0px solid; width: 0px; height: 2.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mover><msub><mi>β</mi><mn>0</mn></msub><mo stretchy="false">^</mo></mover></mrow><mo>+</mo><mrow class="MJX-TeXAtom-ORD"><mover><msub><mi>β</mi><mn>1</mn></msub><mo stretchy="false">^</mo></mover></mrow><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mi>n</mi></msub><msub><mi>X</mi><mi>n</mi></msub></mrow></msup></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-16">p=\frac{1}{1+e^{-\hat{\beta_0}+\hat{\beta_1}X_1+,...,\hat{\beta}_nX_n}}</script></span>, and is classified as class <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-196" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-197"><span class="mn" id="MathJax-Span-198" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-17">1</script></span> when <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mn&gt;0.5&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-199" style="width: 3.812em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1003.1em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-200"><span class="mi" id="MathJax-Span-201" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-202" style="font-family: MathJax_Main; padding-left: 0.301em;">&gt;</span><span class="mn" id="MathJax-Span-203" style="font-family: MathJax_Main; padding-left: 0.301em;">0.5</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo>&gt;</mo><mn>0.5</mn></math></span></span><script type="math/tex" id="MathJax-Element-18">p>0.5</script></span> and class <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-204" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-205"><span class="mn" id="MathJax-Span-206" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-19">2</script></span> otherwise.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"probability"</span>)</span>
<span id="cb36-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        41        42        43        44 </span></span>
<span id="cb36-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.3792253 0.3214585 0.3214585 0.4279515</span></span></code></pre></div>
<p>You can also return a confidence interval and bootstrap percentile. Confidence intervals found with mean of bootstrap percentile confidence intervals.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"CI"</span>, <span class="at">level =</span> <span class="fl">0.95</span>)</span>
<span id="cb37-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          fit       lwr       upr</span></span>
<span id="cb37-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 41 0.3792253 0.3561416 0.4062372</span></span>
<span id="cb37-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 42 0.3214585 0.3048350 0.3386351</span></span>
<span id="cb37-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43 0.3214585 0.3048350 0.3386351</span></span>
<span id="cb37-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 44 0.4279515 0.4050151 0.4504819</span></span></code></pre></div>
<p>Finally, you can specify using multicore processing using the nthreads argument.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, new_dat, <span class="at">type =</span> <span class="st">"probability"</span>, <span class="at">nthreads =</span> <span class="dv">1</span>)</span>
<span id="cb38-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        41        42        43        44 </span></span>
<span id="cb38-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.3792253 0.3214585 0.3214585 0.4279515</span></span></code></pre></div>
</div>
</div>
<div id="performance-metrics-for-blbglm" class="section level3">
<h3>Performance Metrics for Blbglm</h3>
<div id="multicore-processing-for-blbglm" class="section level4">
<h4>Multicore Processing for Blbglm</h4>
<p>Again, multicore processing is offered through the package furrr. Simply specify the number of workers using the nthreads argument</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>)</span></code></pre></div>
<p>We can check the performance using the spam dataset, which has 4,601 rows. We’ll compare the performance of using 8 cores vs 1 core when dividing the dataset in half and getting 5,000 bootstrap samples.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb40-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb40-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb40-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb40-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb40-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb40-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 6 more variables: expression &lt;bch:expr&gt;, min &lt;bch:tm&gt;,</span></span>
<span id="cb40-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;, mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>As we can see, using 8 cores speeds up performance by a lot. We can try again doubling up the number of splits.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb41-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">4</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb41-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">4</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb41-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb41-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb41-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb41-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb41-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb41-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 6 more variables: expression &lt;bch:expr&gt;, min &lt;bch:tm&gt;,</span></span>
<span id="cb41-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   median &lt;bch:tm&gt;, `itr/sec` &lt;dbl&gt;, mem_alloc &lt;bch:byt&gt;, `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>As we can see, the performance of 8 cores is even better.</p>
<p>We can also use multicore processing for predictions</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb42-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">blbglm</span>(type <span class="sc">~</span> make <span class="sc">+</span> address <span class="sc">+</span> all, <span class="at">data =</span> spam, <span class="at">m =</span> <span class="dv">2</span>, <span class="at">B =</span> <span class="dv">5000</span>, <span class="at">nthreads =</span> <span class="dv">8</span>)</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-1" aria-hidden="true" tabindex="-1"></a>new_dat <span class="ot">&lt;-</span> spam[<span class="dv">1000</span><span class="sc">:</span><span class="dv">1500</span>,<span class="sc">-</span><span class="dv">58</span>]</span>
<span id="cb43-2"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-2" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb43-3"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">nthreads =</span> <span class="dv">1</span>),</span>
<span id="cb43-4"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(model, new_dat, <span class="at">nthreads =</span> <span class="dv">8</span>),</span>
<span id="cb43-5"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, </span>
<span id="cb43-6"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-7"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_gc =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-8"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative =</span> <span class="cn">FALSE</span></span>
<span id="cb43-9"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-10"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 6</span></span>
<span id="cb43-11"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   expression                              min median `itr/sec` mem_alloc</span></span>
<span id="cb43-12"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;bch:expr&gt;                            &lt;bch&gt; &lt;bch:&gt;     &lt;dbl&gt; &lt;bch:byt&gt;</span></span>
<span id="cb43-13"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 predict(model, new_dat, nthreads = 1) 19.7s  19.7s    0.0508        NA</span></span>
<span id="cb43-14"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 predict(model, new_dat, nthreads = 8) 32.8s  32.8s    0.0305        NA</span></span>
<span id="cb43-15"><a href="file:///C:/Users/david/Documents/R/blbmethods/vignettes/my-vignette.html#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 1 more variable: `gc/sec` &lt;dbl&gt;</span></span></code></pre></div>
<p>It does take some time to create the cores, so this method is only efficient for large sample sizes.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>



<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Main, sans-serif;"></div></div></body></html>